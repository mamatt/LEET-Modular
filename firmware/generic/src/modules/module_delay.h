#ifndef __module_delay_h
#define __module_delay_h

#include "gd32vf103.h"

// sub modes
#define mode_Delay 0

#define delayColor RGBToWord(0xff, 0x0a, 0xE2)  //ff0ae2
#define delaySubMenuMax 1
const uint8_t delayImage[877] = {255,255,255,255,255,255,255,255,225,23,26,11,22,12,17,13,132,3,87,0,12,0,61,0,6,0,36,0,27,1,19,0,63,0,12,0,34,0,6,0,26,0,67,1,29,0,22,0,11,0,27,0,62,1,21,0,54,0,80,0,11,0,36,1,6,0,15,0,15,0,63,0,52,0,24,0,35,0,6,0,13,0,0,1,12,0,0,0,5,0,37,0,34,0,13,0,49,0,10,0,12,0,14,0,23,0,5,0,1,1,8,1,25,0,57,0,24,0,48,0,12,0,15,0,6,0,6,0,6,0,0,0,5,0,2,1,4,1,2,0,5,1,6,1,5,0,33,6,70,0,34,0,25,0,6,0,15,0,3,4,3,0,5,0,7,0,7,0,6,0,32,3,14,0,63,0,7,0,11,0,18,0,14,1,5,0,0,0,6,0,10,0,5,0,9,0,28,0,22,0,25,0,59,0,11,0,27,0,15,0,0,0,6,2,3,3,5,0,1,0,5,0,7,0,7,0,24,0,11,1,12,0,21,0,27,0,17,0,33,1,6,0,7,0,6,0,0,1,7,3,7,1,1,0,7,0,5,0,7,0,118,0,17,0,29,1,5,0,0,0,6,0,1,0,21,0,6,0,8,0,5,1,40,0,81,0,11,0,22,1,14,0,0,0,6,0,1,2,12,2,1,0,6,0,0,0,5,0,116,0,14,0,11,0,33,0,8,0,6,0,3,12,3,0,6,0,0,0,7,0,5,0,14,0,27,0,11,0,7,0,54,0,0,0,11,0,26,0,5,0,0,0,5,0,1,0,6,0,17,1,6,0,8,0,8,0,25,0,49,0,30,0,24,0,26,0,7,0,0,0,5,0,1,0,6,1,13,1,7,0,1,0,5,0,0,0,6,0,122,0,41,0,15,0,1,0,7,3,6,2,8,0,1,0,5,0,0,0,6,0,135,0,28,0,0,0,5,0,0,0,9,1,9,6,9,1,1,0,5,0,8,0,15,0,41,0,6,0,44,0,21,0,30,0,9,0,5,0,3,1,22,1,2,0,5,0,1,0,5,0,0,0,26,0,49,0,54,0,33,0,5,1,0,0,5,1,3,0,19,1,3,0,5,0,1,0,5,0,135,0,35,0,8,0,6,0,3,3,12,2,3,1,5,0,11,0,113,0,17,0,34,1,7,0,1,1,5,1,5,3,4,3,5,0,6,0,1,1,5,0,0,0,15,0,29,0,18,0,104,0,6,0,2,0,6,0,8,4,7,1,6,0,9,0,81,0,35,0,15,0,37,0,0,1,5,0,2,0,6,2,16,1,6,1,1,1,5,0,1,0,28,0,29,0,71,0,39,0,8,1,1,1,7,5,4,5,7,0,2,0,9,0,47,0,83,0,43,1,10,1,11,4,11,1,10,1,0,0,119,0,11,0,42,0,9,1,3,1,24,1,3,1,5,0,1,0,18,0,28,0,11,0,6,0,107,0,1,1,6,1,3,2,18,2,3,1,6,0,1,0,31,0,49,0,96,0,2,0,7,0,5,5,6,5,5,0,6,1,1,0,49,0,11,0,58,0,58,0,2,1,6,1,9,6,8,2,6,0,2,0,49,0,84,0,47,0,3,0,7,1,21,1,8,0,2,0,21,0,26,0,12,0,7,0,112,1,2,1,7,3,14,2,8,1,2,0,34,0,13,0,12,0,20,0,102,0,3,1,9,14,9,1,3,0,49,0,74,0,64,0,4,2,28,2,3,1,48,1,13,0,72,0,53,1,5,1,24,1,4,1,25,0,19,3,14,0,9,0,11,20,86,1,5,3,16,3,5,0,40,7,17,0,43,0,88,1,7,2,9,3,6,2,66,0,62,0,72,2,7,9,8,1,68,0,75,0,63,2,20,2,68,1,144,4,10,4,35,0,33,0,14,0,31,0,102,10,73,1,234,2,68,0,163,2,83,0,124,26,23,32,17,11,255,255,255,255,209};

class module_delay 
{
    public:
        const char *subMenuText[1] = {"Delay"} ;
        const char *potsName[3] = {"    ","Mix ","Leng"} ;
        uint16_t delay(uint16_t sample, uint16_t mix, uint16_t length);

    private:
        uint16_t anHistory[4096]; // old readings from the analog input. Uses 8192 bytes of RAM...
        uint16_t anPos;           // index of the current reading
};
#endif